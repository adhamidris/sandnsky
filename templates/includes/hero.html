{% load static %}
<section id="hero" class="hero relative min-h-[calc(100vh-4rem)]" aria-label="Promo">
  <!-- Media layer -->
  <div class="hero-media" aria-hidden="true">
    <div class="hero-slide is-active relative">
      {% with bg=hero.background %}
        {% with mobile_image=bg.mobile_image|default:bg.image %}
          {% if mobile_image %}
            {% if bg.mobile_image %}
              {% with is_media=bg.mobile_image_is_media %}
                <img
                  src="{% if is_media %}{{ mobile_image }}{% else %}{% static mobile_image %}{% endif %}"
                  alt=""
                  class="absolute inset-0 h-full w-full object-cover md:hidden"
                  loading="eager"
                  decoding="async"
                />
              {% endwith %}
            {% else %}
              {% with is_media=bg.image_is_media %}
                <img
                  src="{% if is_media %}{{ mobile_image }}{% else %}{% static mobile_image %}{% endif %}"
                  alt=""
                  class="absolute inset-0 h-full w-full object-cover md:hidden"
                  loading="eager"
                  decoding="async"
                />
              {% endwith %}
            {% endif %}
          {% endif %}
        {% endwith %}

        {% with desktop_image=bg.image|default:bg.mobile_image %}
          {% if desktop_image %}
            {% if bg.image %}
              {% with is_media=bg.image_is_media %}
                <img
                  src="{% if is_media %}{{ desktop_image }}{% else %}{% static desktop_image %}{% endif %}"
                  alt=""
                  class="absolute inset-0 hidden h-full w-full object-cover md:block"
                  loading="eager"
                  decoding="async"
                />
              {% endwith %}
            {% else %}
              {% with is_media=bg.mobile_image_is_media %}
                <img
                  src="{% if is_media %}{{ desktop_image }}{% else %}{% static desktop_image %}{% endif %}"
                  alt=""
                  class="absolute inset-0 hidden h-full w-full object-cover md:block"
                  loading="eager"
                  decoding="async"
                />
              {% endwith %}
            {% endif %}
          {% endif %}
        {% endwith %}

        {% if bg.mobile_video %}
          <video
            class="absolute inset-0 h-full w-full object-cover md:hidden"
            autoplay loop muted playsinline
            preload="auto"
            data-hero-video
            aria-hidden="true">
            <source src="{% if bg.mobile_video_is_media %}{{ bg.mobile_video }}{% else %}{% static bg.mobile_video %}{% endif %}" type="{{ bg.mobile_video_type|default:'video/mp4' }}" />
            Your browser does not support the background video.
          </video>
        {% endif %}

        {% if bg.video %}
          <video
            class="absolute inset-0 hidden h-full w-full object-cover md:block"
            autoplay loop muted playsinline
            preload="auto"
            data-hero-video
            aria-hidden="true">
            <source src="{% if bg.video_is_media %}{{ bg.video }}{% else %}{% static bg.video %}{% endif %}" type="{{ bg.video_type|default:'video/mp4' }}" />
            Your browser does not support the background video.
          </video>
        {% endif %}
      {% endwith %}
    </div>
  </div>

  <!-- Overlays (theme overlay + depth layers) -->
  <!-- <div class="hero-overlay" aria-hidden="true"></div>
  <div class="absolute inset-0 bg-gradient-to-b from-rosesand via-clay/80 to-[hsl(var(--background))]" aria-hidden="true"></div>
  <div class="absolute inset-0 bg-gradient-to-t from-black/30 via-black/10 to-transparent mix-blend-multiply" aria-hidden="true"></div> -->

  <!-- Content (left-aligned, aligned to mini-frame top) -->
  <div class="hero-content relative z-10">
    <div class="container hero-inner">
      <div class="hero-copy">
        <h1 class="font-serif text-white drop-shadow-lg">
          {{ hero.title }}
        </h1>
        <!-- <p class="subcopy">
          {{ hero.subtitle }}
        </p> -->
        <div class="actions hero-desktop-cta">
          <a href="{{ hero.primary_cta.href }}" class="btn btn-primary">
            {{ hero.primary_cta.label }}
          </a>
        </div>

      </div>
    </div>
    

    <!-- {% if hero.has_overlay %}
      <aside class="mini-frame portrait" aria-label="Featured image" data-hero-overlays data-hero-overlay-interval="{{ hero.overlay_interval }}">
        {% for overlay in hero.overlays %}
          <div
            class="mini-frame-media{% if forloop.first %} is-active{% endif %}"
            data-hero-overlay>
            <img
              src="{% if overlay.image_is_media %}{{ overlay.image }}{% else %}{% static overlay.image %}{% endif %}"
              alt="{{ overlay.alt|default:'' }}"
              loading="{% if forloop.first %}eager{% else %}lazy{% endif %}"
              decoding="async" />
          </div>
        {% endfor %}
      </aside>
    {% endif %} -->

    <div class="actions mobile-hero-cta">
      <a href="{{ hero.primary_cta.href }}" class="btn btn-primary">
        {{ hero.primary_cta.label }}
      </a>
    </div>
  </div>


</section>
