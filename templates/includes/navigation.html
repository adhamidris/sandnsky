{# templates/includes/navigation.html (example path) #}
<header class="nav" role="banner">
  <div class="container row" role="navigation" aria-label="Primary">
    <!-- Mobile: menu toggle -->
    <button class="burger" type="button" aria-label="Open menu" aria-controls="mobile-nav" aria-expanded="false" data-nav-toggle>
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M4 7h16M4 12h16M4 17h16" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
      </svg>
    </button>

    <!-- Brand -->
    <a href="/" class="brand">Sand &amp; Sky</a>

    <!-- Desktop links -->
    <nav class="links desktop-links" aria-label="Primary">
      <a href="/"
         class="link"
         {% if request.path == '/' %}aria-current="page"{% endif %}>
        Home
      </a>

      <a href="/trips"
         class="link"
         {% if request.path|slice:":6" == '/trips' %}aria-current="page"{% endif %}>
        Our Trips
      </a>

      {% if request.path == '/' %}
      <a href="#about" class="link">About</a>
      <a href="#contact" class="link">Contact</a>
      {% endif %}
    </nav>

    <!-- CTAs (Book/Tours + Cart) -->
    {% with request.resolver_match as match %}
    <div class="cta">
      {% if match and match.url_name == 'trip-detail' %}
        <a href="#booking-form"
           class="btn dark cta-btn"
           data-mobile-sheet-open
           aria-controls="booking-drawer"
           aria-expanded="false">
          Book Now
        </a>
      {% else %}
        <a href="/trips" class="btn dark cta-btn">
          {% if match %}
            {% if match.url_name == 'home' or match.url_name == 'blog-list' or match.url_name == 'blog-detail' %}
              Tours
            {% else %}
              Book Now
            {% endif %}
          {% else %}
            Book Now
          {% endif %}
        </a>
      {% endif %}

      {# cart dropdown / icon #}
      {% include 'includes/navigation_cart.html' %}
    </div>
    {% endwith %}
  </div>

  <!-- Mobile panel -->
  <div id="mobile-nav" class="mobile-panel" hidden>
    <div class="container">
      <nav class="mobile-links" aria-label="Mobile primary">
        <a href="/"
           class="mobile-link"
           {% if request.path == '/' %}aria-current="page"{% endif %}>
          Home
        </a>

        <a href="/trips"
           class="mobile-link"
           {% if request.path|slice:":6" == '/trips' %}aria-current="page"{% endif %}>
          Our Trips
        </a>

        {% if request.path == '/' %}
        <a href="#about" class="mobile-link" data-close-nav>About</a>
        <a href="#contact" class="mobile-link" data-close-nav>Contact</a>
        {% endif %}
      </nav>

      {% with request.resolver_match as match %}
      <div class="mobile-cta">
        {% if match and match.url_name == 'trip-detail' %}
          <a href="#booking-form" class="btn dark cta-btn" data-close-nav data-mobile-sheet-open aria-controls="booking-drawer" aria-expanded="false">
            Book Now
          </a>
        {% else %}
          <a href="/trips" class="btn dark cta-btn" data-close-nav>
            {% if match %}
              {% if match.url_name == 'home' or match.url_name == 'blog-list' or match.url_name == 'blog-detail' %}
                Tours
              {% else %}
                Book Now
              {% endif %}
            {% else %}
              Book Now
            {% endif %}
          </a>
        {% endif %}
      </div>
      {% endwith %}
    </div>
  </div>
</header>

{% block script %}
<script>
    (() => {
      const btn = document.querySelector('[data-nav-toggle]');
      const panel = document.getElementById('mobile-nav');
      if (!btn || !panel) return;
  
      const setOpen = (open) => {
        panel.hidden = !open;
        btn.setAttribute('aria-expanded', String(open));
        document.documentElement.classList.toggle('nav-open', open);
      };
  
      btn.addEventListener('click', () => setOpen(panel.hidden));
      panel.addEventListener('click', (e) => {
        if (e.target.closest('[data-close-nav]')) setOpen(false);
      });
    })();
  </script>
  {% endblock %}
