{# templates/includes/navigation.html (example path) #}
{% load static %}
<header class="nav" role="banner">
  <div class="container row" role="navigation" aria-label="Primary">
    <!-- Mobile: menu toggle -->
    <button class="burger" type="button" aria-label="Open menu" aria-controls="mobile-nav" aria-expanded="false" data-nav-toggle>
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M4 7h16M4 12h16M4 17h16" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
      </svg>
    </button>

    <!-- Brand -->
    <a href="/" class="brand"><img src="https://pub-b5144fdd56fb4b018c6d025a213f59d3.r2.dev/logfin.png" width="210" height="50" alt="Sand & Sky" /></a>

    <!-- Desktop links -->
    <nav class="links desktop-links" aria-label="Primary">
      <a href="/"
         class="link"
         {% if request.path == '/' %}aria-current="page"{% endif %}>
        Home
      </a>

      <a href="/destinations"
         class="link"
         {% if request.path|slice:":13" == '/destinations' %}aria-current="page"{% endif %}>
        Destinations
      </a>

      {% with current_collection=request.GET.collection|default:'' %}
      <a href="/trips"
         class="link"
         {% if request.path|slice:":6" == '/trips' and current_collection != 'packages' and current_collection != 'luxury' %}aria-current="page"{% endif %}>
        Our Trips
      </a>

      <a href="/trips?collection=packages#trip-list"
         class="link"
         {% if request.path|slice:":6" == '/trips' and current_collection == 'packages' %}aria-current="page"{% endif %}>
        Packages
      </a>

      <a href="/trips?collection=luxury#trip-list"
         class="link luxury-link"
         {% if request.path|slice:":6" == '/trips' and current_collection == 'luxury' %}aria-current="page"{% endif %}>
        Luxury
      </a>
      {% endwith %}
    </nav>

    <!-- CTAs (Book/Tours + Cart) -->
    <div class="cta">
      {# cart dropdown / icon #}
      {% include 'includes/navigation_cart.html' %}
    </div>
  </div>

  <!-- Mobile panel -->
  <div id="mobile-nav" class="mobile-panel" hidden>
    <div class="container">
      <nav class="mobile-links" aria-label="Mobile primary">
        <a href="/"
           class="mobile-link"
           {% if request.path == '/' %}aria-current="page"{% endif %}>
          Home
        </a>

        <a href="/destinations"
           class="mobile-link"
           {% if request.path|slice:":13" == '/destinations' %}aria-current="page"{% endif %}>
          Destinations
        </a>

        {% with current_collection=request.GET.collection|default:'' %}
        <a href="/trips"
           class="mobile-link"
           {% if request.path|slice:":6" == '/trips' and current_collection != 'packages' and current_collection != 'luxury' %}aria-current="page"{% endif %}>
          Our Trips
        </a>

        <a href="/trips?collection=packages#trip-list"
           class="mobile-link"
           {% if request.path|slice:":6" == '/trips' and current_collection == 'packages' %}aria-current="page"{% endif %}
           data-close-nav>
          Packages
        </a>

        <a href="/trips?collection=luxury#trip-list"
           class="mobile-link luxury-link"
           {% if request.path|slice:":6" == '/trips' and current_collection == 'luxury' %}aria-current="page"{% endif %}
           data-close-nav>
          Luxury
        </a>
        {% endwith %}
      </nav>

    </div>
  </div>
</header>

{% block script %}
<script>
    (() => {
      const btn = document.querySelector('[data-nav-toggle]');
      const panel = document.getElementById('mobile-nav');
      if (!btn || !panel) return;
  
      const setOpen = (open) => {
        panel.hidden = !open;
        btn.setAttribute('aria-expanded', String(open));
        document.documentElement.classList.toggle('nav-open', open);
      };
  
      btn.addEventListener('click', () => setOpen(panel.hidden));
      panel.addEventListener('click', (e) => {
        if (e.target.closest('[data-close-nav]')) setOpen(false);
      });
    })();
  </script>
  {% endblock %}
