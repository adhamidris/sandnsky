{% extends "base.html" %}
{% load static %}

{% block title %}Booking Confirmation — {{ trip.title }}{% endblock %}

{% block content %}
<section class="bg-background px-4 py-16 sm:px-6 lg:px-8">
  <div class="mx-auto max-w-5xl space-y-10">
    <header class="flex flex-col gap-6 rounded-3xl border border-border bg-card px-6 py-8 shadow-subtle sm:flex-row sm:items-center sm:justify-between sm:px-10 sm:py-12">
      <div class="space-y-4">
        <p class="text-xs font-semibold uppercase tracking-[0.28em] text-primary">Request received</p>
        <h1 class="font-serif text-3xl text-foreground sm:text-4xl">Thanks for choosing Sand &amp; Sky Tours</h1>
        <p class="max-w-xl text-sm text-muted-foreground">Your travel specialist is reviewing the details and will reach out within 24 hours to confirm availability, customise the itinerary, and finalise payment arrangements.</p>
        <dl class="mt-4 grid grid-cols-1 gap-3 text-sm text-muted-foreground sm:grid-cols-2">
          <div>
            <dt class="text-xs font-semibold uppercase tracking-[0.25em] text-muted-foreground">Booking reference</dt>
            <dd class="font-mono text-base text-foreground">{{ booking.reference_code }}</dd>
          </div>
          <div>
            <dt class="text-xs font-semibold uppercase tracking-[0.25em] text-muted-foreground">Submitted</dt>
            <dd>{{ booking.created_at|date:"j M Y, H:i" }} ({{ booking.created_at|date:"T" }})</dd>
          </div>
        </dl>
        <p class="text-xs text-muted-foreground">No payment has been processed yet.</p>
      </div>
      <div class="flex flex-col gap-3 sm:items-end">
        <button type="button" class="inline-flex items-center gap-2 rounded-full border border-border bg-background px-4 py-2 text-sm font-semibold text-foreground shadow-sm transition-colors hover:border-primary/40 hover:text-primary focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary" onclick="window.print()">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="h-4 w-4">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 9V4h12v5M6 19h12v-6H6v6Zm12 0V9H6v10" />
          </svg>
          <span>Print or save PDF</span>
        </button>
        <a href="{{ trip_url }}" class="inline-flex items-center gap-2 text-sm font-semibold text-primary transition-colors hover:text-primary/80 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary">View trip details
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="h-4 w-4">
            <path stroke-linecap="round" stroke-linejoin="round" d="m9 5 7 7-7 7" />
          </svg>
        </a>
      </div>
    </header>

    <div class="grid gap-8 lg:grid-cols-[minmax(0,1fr)_320px]">
      <section class="space-y-8 rounded-3xl border border-border bg-card px-6 py-8 shadow-subtle">
        <header class="space-y-2">
          <p class="text-xs font-semibold uppercase tracking-[0.25em] text-muted-foreground">Trip overview</p>
          <h2 class="text-2xl font-serif text-foreground">{{ trip.title }}</h2>
          <p class="text-sm text-muted-foreground">Travel date {{ booking.travel_date|date:"j M Y" }} · {{ traveler_summary }}</p>
        </header>

        <div class="grid gap-6 sm:grid-cols-2">
          <div class="space-y-2 text-sm">
            <p class="text-xs font-semibold uppercase tracking-[0.25em] text-muted-foreground">Lead traveler</p>
            <p class="text-foreground">{{ booking.full_name }}</p>
            <p class="text-muted-foreground">{{ booking.email }} · {{ booking.phone }}</p>
          </div>
          <div class="space-y-2 text-sm">
            <p class="text-xs font-semibold uppercase tracking-[0.25em] text-muted-foreground">Primary destination</p>
            <p class="text-foreground">{{ trip.destination.name }}</p>
            {% if additional_destinations %}
            <p class="text-muted-foreground">Also visiting: {{ additional_destinations|join:", " }}</p>
            {% endif %}
          </div>
        </div>

        {% if booking.special_requests %}
        <div class="rounded-2xl border border-dashed border-border bg-background/60 px-4 py-4 text-sm text-muted-foreground">
          <p class="text-xs font-semibold uppercase tracking-[0.25em] text-muted-foreground">Special requests</p>
          <p class="mt-1 whitespace-pre-line text-foreground">{{ booking.special_requests }}</p>
        </div>
        {% endif %}

        <div class="space-y-4">
          <h3 class="text-sm font-semibold uppercase tracking-[0.25em] text-muted-foreground">Pricing summary (USD)</h3>
          <div class="space-y-2 rounded-2xl border border-border bg-background/80 p-4 text-sm text-foreground">
            <div class="flex items-center justify-between">
              <span>Base for travelers</span>
              <span>{{ pricing.base_display }}</span>
            </div>
            <div class="flex items-center justify-between">
              <span>Optional extras</span>
              <span>{{ pricing.extras_display }}</span>
            </div>
            <div class="border-t border-border pt-3 text-base font-semibold">
              <div class="flex items-center justify-between">
                <span>Total estimate</span>
                <span>{{ pricing.total_display }}</span>
              </div>
              <p class="mt-1 text-xs text-muted-foreground">Payable once your travel specialist confirms availability.</p>
            </div>
          </div>
          {% if extras %}
          <div class="rounded-2xl border border-border/70 bg-background/60 p-4 text-sm text-muted-foreground">
            <p class="text-xs font-semibold uppercase tracking-[0.25em] text-muted-foreground">Included extras</p>
            <ul class="mt-3 space-y-2 text-foreground">
              {% for extra in extras %}
              <li class="flex items-center justify-between">
                <span>{{ extra.name }}</span>
                <span class="text-sm text-muted-foreground">{{ extra.price_display }}</span>
              </li>
              {% endfor %}
            </ul>
          </div>
          {% endif %}
        </div>
      </section>

      <aside class="space-y-6">
        <div class="rounded-3xl border border-border bg-card px-6 py-6 text-sm shadow-subtle">
          <p class="text-xs font-semibold uppercase tracking-[0.25em] text-muted-foreground">Need updates?</p>
          <p class="mt-2 text-muted-foreground">Share your reference <span class="font-mono text-xs text-foreground">{{ booking.reference_code }}</span> when you call, email, or WhatsApp our team.</p>
          <div class="mt-4 space-y-2">
            {% for action in contact_actions %}
            <a href="{{ action.href }}" class="block rounded-full border border-border/60 px-4 py-2 text-sm font-semibold text-foreground transition-colors hover:border-primary/40 hover:text-primary focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary" target="_blank" rel="noopener">
              {{ action.label }}
            </a>
            {% endfor %}
          </div>
        </div>
        <div class="rounded-3xl border border-dashed border-border px-5 py-5 text-xs text-muted-foreground">
          <p class="font-semibold uppercase tracking-[0.25em] text-muted-foreground">Next steps</p>
          <ol class="mt-3 space-y-2 text-sm">
            <li>1. Our team reviews your request and confirms availability.</li>
            <li>2. We fine-tune the itinerary with you.</li>
            <li>3. You receive a secure payment link to confirm your booking.</li>
          </ol>
        </div>
      </aside>
    </div>
  </div>
</section>
{% endblock %}
