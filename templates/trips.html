{% extends "base.html" %}
{% load static %}

{% block title %}Our Tours & Experiences â€” Nile Dreams{% endblock %}

{% block content %}
{% if destination_hero %}
<section id="page-top" class="relative isolate overflow-hidden bg-black text-white">
  {% if destination_hero.image_url %}
  <img src="{{ destination_hero.image_url }}" alt="{{ destination_hero.title }}" class="absolute inset-0 h-full w-full object-cover opacity-80" />
  {% else %}
  <div class="absolute inset-0 bg-gradient-to-br from-primary/70 via-primary/60 to-black opacity-90"></div>
  {% endif %}
  <div class="absolute inset-0 bg-gradient-to-b from-black/60 via-black/50 to-black/80"></div>
  <div class="relative mx-auto max-w-7xl px-4 pb-28 pt-32 sm:px-6 lg:px-8">
    <div class="max-w-3xl space-y-6">
      <span class="inline-flex items-center gap-2 rounded-full bg-white/10 px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-white/70">Destination spotlight</span>
      <h1 class="font-serif text-4xl leading-tight sm:text-5xl md:text-6xl">{{ destination_hero.title }}</h1>
      {% if destination_hero.subtitle %}
      <p class="text-base leading-relaxed text-white/80 sm:text-lg">{{ destination_hero.subtitle }}</p>
      {% elif selected_destination and selected_destination.tagline %}
      <p class="text-base leading-relaxed text-white/80 sm:text-lg">{{ selected_destination.tagline }}</p>
      {% endif %}
    </div>
    <div class="mt-12 flex flex-wrap gap-4">
      <span class="inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/10 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white/80">
        <svg class="h-3.5 w-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
        </svg>
        {{ trips|length }} itineraries
      </span>
      {% if selected_destination and selected_destination.tagline %}
      <span class="inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/10 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white/80">
        <svg class="h-3.5 w-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M16.343 7.657 12 12l-4.343-4.343" />
          <path stroke-linecap="round" stroke-linejoin="round" d="M19.071 4.929A10 10 0 1 0 4.93 19.07 10 10 0 0 0 19.07 4.93Z" />
        </svg>
        {{ selected_destination.tagline }}
      </span>
      {% endif %}
      <span class="inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/10 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white/80">
        <svg class="h-3.5 w-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3 7h18M3 12h18M3 17h18" />
        </svg>
        Thoughtfully paced journeys
      </span>
      <span class="inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/10 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white/80">
        <svg class="h-3.5 w-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
        </svg>
        {{ trips|length }} trips available
      </span>
    </div>
  </div>
</section>
{% else %}
<section id="page-top" class="relative isolate overflow-hidden bg-background">
  <div class="absolute inset-0 bg-gradient-to-br from-primary/5 via-accent/10 to-primary/5"></div>
  <div class="relative mx-auto max-w-7xl px-4 pb-28 pt-32 sm:px-6 lg:px-8">
    <div class="max-w-3xl space-y-6 text-center sm:text-left">
      <span class="inline-flex items-center justify-center gap-2 rounded-full bg-primary/10 px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-primary">Our journeys</span>
      <h1 class="font-serif text-4xl leading-tight text-foreground sm:text-5xl md:text-6xl">Our Tours &amp; Experiences</h1>
      <p class="text-base leading-relaxed text-muted-foreground sm:text-lg">Carefully curated journeys to unveil the wonders of Egypt.</p>
      <div class="flex flex-wrap justify-center gap-3 sm:justify-start">
        <span class="inline-flex items-center gap-2 rounded-full border border-primary/30 bg-white px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-primary">Trusted local experts</span>
        <span class="inline-flex items-center gap-2 rounded-full border border-primary/30 bg-white px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-primary">Small group departures</span>
      </div>
    </div>
  </div>
</section>
{% endif %}

{% if selected_destination %}
<section class="bg-background px-4 py-16 sm:px-6 lg:px-8">
  <div class="mx-auto max-w-7xl">
    <div class="grid gap-10 lg:grid-cols-12 lg:items-start xl:gap-12">
      <div class="flex flex-col gap-12 lg:col-span-8 xl:col-span-7">
        <div class="flex flex-col gap-6">
          <p class="text-xs font-semibold uppercase tracking-[0.2em] text-muted-foreground">Why visit {{ selected_destination.name }}</p>
          {% if selected_destination.description %}
          <p class="text-lg leading-relaxed text-muted-foreground whitespace-pre-line">{{ selected_destination.description }}</p>
          {% else %}
          <p class="text-lg leading-relaxed text-muted-foreground">Discover curated journeys designed to reveal the essence of {{ selected_destination.name }} with expert guides and seamless planning.</p>
          {% endif %}
        </div>
        <div class="flex flex-col gap-3">
          <p class="text-xs font-semibold uppercase tracking-[0.2em] text-muted-foreground">Trip style</p>
          {% if destination_hero and destination_hero.subtitle %}
          <p class="text-lg leading-relaxed text-muted-foreground whitespace-pre-line">{{ destination_hero.subtitle }}</p>
          {% elif selected_destination.tagline %}
          <p class="text-lg leading-relaxed text-muted-foreground whitespace-pre-line">{{ selected_destination.tagline }}</p>
          {% else %}
          <p class="text-lg leading-relaxed text-muted-foreground">Handcrafted journeys that balance iconic highlights with local secrets.</p>
          {% endif %}
        </div>
      </div>
      <div class="rounded-2xl border border-dashed border-border/70 bg-muted/40 p-6 text-sm leading-relaxed text-muted-foreground lg:col-span-4 lg:ml-auto lg:max-w-sm lg:p-7 xl:col-span-3">
        Looking for something bespoke? Tell us how you would like to experience {{ selected_destination.name }} and our specialists will craft a custom journey.
      </div>
    </div>
  </div>
</section>
{% endif %}

<section id="trip-list" class="bg-background px-4 pb-28 sm:px-6 lg:px-8 {% if selected_destination %}pt-10 md:pt-14{% else %}pt-24{% endif %}">
  <div class="mx-auto max-w-7xl">
    <div class="grid gap-10 lg:grid-cols-12 xl:gap-12">
      <div class="flex flex-col gap-4 text-center md:text-left lg:col-span-4 lg:pr-6">
        <h2 class="font-serif text-3xl text-foreground sm:text-4xl">
          {% if selected_destination %}
          Trips in {{ selected_destination.name }}
          {% else %}
          Available Tours
          {% endif %}
        </h2>
        <p class="text-base leading-relaxed text-muted-foreground">
          {% if selected_destination %}
          Explore {{ trips|length }} hand-crafted itineraries designed to reveal the heart of {{ selected_destination.name }}. Each journey balances iconic highlights with quieter moments only locals know.
          {% else %}
          Explore {{ trips|length }} journeys crafted by our Egypt specialists. Every itinerary blends essential sights with authentic experiences and seamless service.
          {% endif %}
        </p>
      </div>
      <div class="flex flex-col gap-10 lg:col-span-8">
        {% if trips %}
        <div class="grid gap-10 sm:grid-cols-2 xl:grid-cols-2 2xl:grid-cols-3">
          {% for trip in trips %}
          <article class="group flex h-full flex-col overflow-hidden rounded-2xl border border-border/60 bg-card/95 shadow-subtle transition duration-300 hover:-translate-y-1 hover:shadow-xl animate-fade-in" style="animation-delay: {{ forloop.counter0 }}00ms">
            <div class="relative h-64 overflow-hidden">
              {% if trip.image_url %}
              <img src="{{ trip.image_url }}" alt="{{ trip.title }}" class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-110" />
              {% else %}
              <div class="flex h-full items-center justify-center bg-muted text-muted-foreground">
                <span class="text-sm font-semibold uppercase tracking-wide">Image coming soon</span>
              </div>
              {% endif %}
              {% if trip.category %}
              <span class="absolute left-5 top-5 inline-flex items-center rounded-full bg-primary/95 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-primary-foreground shadow-subtle">{{ trip.category }}</span>
              {% endif %}
            </div>
            <div class="flex flex-1 flex-col gap-6 p-8">
              <header class="space-y-3">
                <h3 class="font-serif text-2xl text-foreground">{{ trip.title }}</h3>
                <p class="text-base leading-relaxed text-muted-foreground">{{ trip.description }}</p>
              </header>
              <dl class="grid grid-cols-1 gap-4 text-sm text-muted-foreground sm:grid-cols-2">
                <div class="flex items-center gap-2">
                  <span class="sr-only">Duration</span>
                  <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                  </svg>
                  <span>{{ trip.duration }}</span>
                </div>
                <div class="flex items-center gap-2">
                  <span class="sr-only">Group Size</span>
                  <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M16 17v-1a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v1" />
                    <circle cx="8" cy="7" r="3" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M22 17v-1a4 4 0 0 0-3-3.87" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M16 7a3 3 0 0 1-2 2.82" />
                  </svg>
                  <span>{{ trip.group_size }}</span>
                </div>
                <div class="flex items-center gap-2">
                  <span class="sr-only">Location</span>
                  <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10c0 7-7.5 11.5-7.5 11.5S4.5 17 4.5 10a7.5 7.5 0 1 1 15 0Z" />
                  </svg>
                  <span>{{ trip.location }}</span>
                </div>
                <div class="flex items-center gap-2">
                  <span class="sr-only">Price</span>
                  <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 8c-1.657 0-3 .843-3 1.882C9 10.92 10.343 11.764 12 11.764s3 .843 3 1.882S13.657 15.528 12 15.528s-3-.843-3-1.882" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 5v14" />
                  </svg>
                  <span>{{ trip.price }} <span class="text-xs text-muted-foreground">/ person</span></span>
                </div>
              </dl>
              <a href="{% url 'web:trip-detail' trip.slug %}" class="mt-auto inline-flex items-center justify-center rounded-full bg-primary px-5 py-2.5 text-sm font-semibold text-primary-foreground shadow-subtle transition-colors hover:bg-primary/90 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary">View details</a>
            </div>
          </article>
          {% endfor %}
        </div>
        {% else %}
        <div class="max-w-3xl rounded-3xl border border-dashed border-border bg-muted/50 p-12 text-center shadow-subtle">
          <h3 class="font-serif text-2xl text-foreground">No trips yet</h3>
          <p class="mt-3 text-base leading-relaxed text-muted-foreground">
            {% if selected_destination %}
            We have not published any trips for {{ selected_destination.name }} yet. Share your travel dreams and our specialists will design a bespoke itinerary.
            {% else %}
            New journeys will be published soon. Check back shortly or reach out to craft a private departure.
            {% endif %}
          </p>
        </div>
        {% endif %}
      </div>
    </div>
  </div>
</section>
{% endblock %}
